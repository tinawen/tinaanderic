{% extends "nav.html" %}
{% block content %}
<div class="text-center rsvp">
	<div class="rsvp-text">
	We hope you'll be able to join us for our special day!
</div>
<form class="" action="/rsvp/{{ token }}/submit" onsubmit="return validateRSVPForm()" method="POST">
  <input name=_csrf_token type=hidden value="{{ csrf_token() }}">
  <input name="ids" type=hidden value="{{ guest_ids }}">
  {% for guest in guests %}
  <div class="rsvp-answer-group">
    <div class="row rsvp-guest rsvp-guest-coming">
    	<div class="rsvp-guest-name col-md-6 col-sm-12">
			{{ guest.name }}        
		</div>
		<div class="btn-group col-md-6 col-sm-12" data-toggle="buttons">
	  		<label class="btn btn-default rsvp-options-yes {{ 'active' if guest.coming else None }}">
	    		<input type="radio" autocomplete="off">Attend
			</label>
  			<label class="btn btn-default rsvp-options-no {{ 'active' if not guest.coming else None }}">
    			<input type="radio" autocomplete="off">Decline
  			</label>
		</div>
	</div>
	<input name="attending_{{ guest.id }}" type="hidden" value="-1">
	<div class="row rsvp-guest rsvp-guest-meal {{ 'show' if guest.coming else None }} ">
    	<div class="rsvp-guest-name col-md-6 col-sm-12">
			{{ guest.name }}'s meal choice:
		</div>
		<div class="col-md-6 col-sm-12">
		<div class="dropdown" role="presentation">
			{% set meal_selection = ["Steak", "Crab", "Vegan"] %}
  			<button class="mealSelection" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  				<span class="choose">
  					{{ meal_selection[guest.meal_selection] if guest.meal_selection else "Please choose..."}}
	    		</span>
		    	<span class="caret"></span>
			</button>
  			<ul class="dropdown-menu" role="menu" aria-labelledby="mealSelection">
  				{% set i = 1 %}
  				{% for meal in meal_selection %}
	  				<li role="presentation"><a role="menuitem" tabindex="{{i}}" href="#">{{ meal }}</a></li>
	  				{%	set i = i + 1 %}
	  			{% endfor %}
  			</ul>
		</div>
		</div>
	</div>
	<input name="meal_{{ guest.id }}" type="hidden" value="-1">
	<div class="row rsvp-guest last-row rsvp-guest-dietary {{ 'show' if guest.coming else None }}">
		<label for="message-text" class="rsvp-question col-md-6">Does {{ guest.name }} have any dietary restrictions?</label>
		<div class="col-md-6">
	        <textarea name="dietary_{{ guest.id }}" class="rsvp-dietary">{{ guest.dietary_restrictions if guest.dietary_restrictions else "" }}</textarea>
	    </div>
    </div>
    <div class="row rsvp-guest last-row rsvp-guest-dietary">
      <label for="message-text" class="rsvp-question col-md-6">Does {{ guest.name }} have any dietary restrictions?</label>
      <div class="col-md-6">
	<textarea class="rsvp-dietary"></textarea>
      </div>
    </div>
  </div>
  {% endfor %}
  <div class="send-rsvp">
       <button type="submit" class="btn btn-primary">Send RSVP</button>
       <div id="failure" class="rsvp-failure-text" style="display: none">
       </div>
  </div>
</form>
{% endblock %}
